<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cargando - Krause Insurance</title>
  <base href="/memo/">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet">
  <script>
    // Keep the loader visually consistent with the app theme.
    // The main app uses the same localStorage key.
    (function () {
      try {
        const t = localStorage.getItem('krause_theme');
        if (t) document.documentElement.setAttribute('data-theme', t);
      } catch (e) {
        // ignore
      }
    })();
  </script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    /* Loader theme tokens (avoid hard-coded colors in component styles) */
    :root {
      --gradient-start: #0f2b24;
      --gradient-mid: #1b3f47;
      --gradient-end: #2f6b7a;
      --loader-fg: rgba(223, 243, 237, 0.98);
      --loader-fg-muted: rgba(223, 243, 237, 0.28);
      --loader-shadow: rgba(0, 0, 0, 0.42);
      --loader-accent: #8dd7c0;
      --loader-accent-strong: #c3efe2;
    }

    :root[data-theme="dark-forest"] {
      --gradient-start: #0f2b24;
      --gradient-mid: #1b3f47;
      --gradient-end: #2f6b7a;
      --loader-fg: rgba(223, 243, 237, 0.98);
      --loader-fg-muted: rgba(223, 243, 237, 0.32);
      --loader-shadow: rgba(0, 0, 0, 0.6);
      --loader-accent: #8dd7c0;
      --loader-accent-strong: #c3efe2;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-mid) 50%, var(--gradient-end) 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
    }
    
    /* Animated background particles */
    .bg-particles {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 0;
    }
    
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: var(--loader-fg-muted);
      border-radius: 50%;
      animation: particleFloat linear infinite;
    }
    
    @keyframes particleFloat {
      0% {
        transform: translateY(100vh) scale(0);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh) scale(1);
        opacity: 0;
      }
    }
    
    .loading-container {
      text-align: center;
      position: relative;
      z-index: 10;
      max-width: 500px;
      padding: 20px;
    }
    
    /* Shield Loader - Brand Mark Animation */
    .shield-loader {
      width: 200px;
      height: 220px;
      margin: 0 auto 30px;
      position: relative;
    }

    .shield-svg {
      width: 100%;
      height: 100%;
      filter: drop-shadow(0 12px 42px var(--loader-shadow));
    }

    .shield-mark path,
    .shield-mark ellipse,
    .shield-mark line {
      stroke-width: 3;
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .shield-ring {
      stroke: url(#shieldStrokeGradient);
      stroke-dasharray: 140;
      stroke-dashoffset: 140;
      animation: ringDraw 2.6s ease-in-out infinite alternate;
    }

    .shield-diamond {
      stroke: var(--loader-fg);
      stroke-dasharray: 160;
      stroke-dashoffset: 160;
      animation: diamondDraw 2.4s ease-in-out infinite alternate;
    }

    .shield-arc {
      stroke: var(--loader-accent);
      stroke-dasharray: 80;
      stroke-dashoffset: 80;
      animation: arcGlow 2.1s ease-in-out infinite alternate;
    }

    .shield-lance {
      stroke: var(--loader-accent-strong);
      animation: lancePulse 1.6s ease-in-out infinite;
    }

    .shield-core {
      fill: var(--loader-accent-strong);
      filter: drop-shadow(0 0 12px rgba(195, 239, 226, 0.5));
      transform-origin: 40px 38px;
      animation: corePulse 1.8s ease-in-out infinite;
    }

    .shield-orbit {
      fill: none;
      stroke: var(--loader-fg-muted);
      stroke-width: 1.4;
      stroke-dasharray: 6 8;
      animation: orbitSpin 7s linear infinite;
      transform-origin: 40px 40px;
    }

    .shield-orbit.orbit-delayed {
      stroke-dasharray: 4 10;
      animation-duration: 9s;
      animation-delay: 0.5s;
      opacity: 0.6;
    }

    @keyframes ringDraw {
      from {
        stroke-dashoffset: 140;
        opacity: 0.4;
      }
      to {
        stroke-dashoffset: 0;
        opacity: 1;
      }
    }

    @keyframes diamondDraw {
      from {
        stroke-dashoffset: 160;
        opacity: 0.35;
      }
      to {
        stroke-dashoffset: 0;
        opacity: 1;
      }
    }

    @keyframes arcGlow {
      0% {
        stroke-dashoffset: 80;
        opacity: 0.4;
        filter: drop-shadow(0 0 10px rgba(141, 215, 192, 0.4));
      }
      100% {
        stroke-dashoffset: 0;
        opacity: 1;
        filter: drop-shadow(0 0 18px rgba(141, 215, 192, 0.6));
      }
    }

    @keyframes lancePulse {
      0%, 100% {
        stroke-width: 3;
        opacity: 0.8;
      }
      50% {
        stroke-width: 3.6;
        opacity: 1;
      }
    }

    @keyframes orbitSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes corePulse {
      0%, 100% {
        transform: scale(1);
        opacity: 1;
      }
      50% {
        transform: scale(1.15);
        opacity: 0.7;
      }
    }
    
    h2 {
      font-family: 'Cinzel', serif;
      font-size: clamp(1.8rem, 4vw, 2.5rem);
      color: var(--loader-fg);
      margin-bottom: 1rem;
      font-weight: 700;
      letter-spacing: 2px;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.38);
    }
    
    .loading-text {
      color: rgba(223, 243, 237, 0.9);
      font-size: clamp(1rem, 2vw, 1.2rem);
      margin-bottom: 2rem;
      font-weight: 300;
      animation: textPulse 2s ease-in-out infinite;
    }
    
    @keyframes textPulse {
      0%, 100% { opacity: 0.9; }
      50% { opacity: 0.6; }
    }
    
    .status-text {
      color: rgba(223, 243, 237, 0.85);
      font-size: clamp(0.9rem, 1.8vw, 1.1rem);
      margin-bottom: 1.5rem;
      min-height: 30px;
      font-weight: 500;
    }
    
    /* Progress percentage */
    .progress-percentage {
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 700;
      color: var(--loader-fg);
      margin-bottom: 1rem;
      text-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
      font-family: 'Cinzel', serif;
    }
    
    /* Dots animation */
    .dots {
      display: inline-block;
      width: 40px;
      text-align: left;
    }
    
    .dots::after {
      content: '...';
      animation: dots 1.5s steps(4, end) infinite;
    }
    
    @keyframes dots {
      0%, 20% { content: '.'; }
      40% { content: '..'; }
      60%, 100% { content: '...'; }
    }
    
    /* Progress details */
    .progress-details {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
      padding: 0 10px;
      color: rgba(223, 243, 237, 0.72);
      font-size: 0.9rem;
    }
    
    /* Did you know section */
    .did-you-know {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      padding: clamp(16px, 3vh, 24px) clamp(20px, 4vw, 32px);
      margin: 2rem 0 1rem;
      animation: fadeInUp 0.8s ease-out 0.5s both;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .did-you-know-title {
      font-size: clamp(1rem, 2vw, 1.2rem);
      font-weight: 700;
      color: var(--loader-accent);
      margin-bottom: 0.75rem;
      text-align: center;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }
    
    .did-you-know-text {
      font-size: clamp(0.85rem, 1.6vw, 1rem);
      color: var(--loader-fg);
      line-height: 1.6;
      text-align: center;
      font-weight: 400;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
  <!-- Background particles -->
  <div class="bg-particles" id="particles"></div>
  
  <div class="loading-container">
    <!-- Shield Loader -->
    <div class="shield-loader">
      <svg class="shield-svg" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="shieldStrokeGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="var(--loader-accent-strong)" stop-opacity="1" />
            <stop offset="100%" stop-color="var(--loader-fg)" stop-opacity="1" />
          </linearGradient>
        </defs>
        <g class="shield-mark">
          <ellipse class="shield-ring" cx="40" cy="38" rx="22" ry="22" />
          <path class="shield-diamond" d="M40 12 L62 35 L40 70 L18 35 Z" />
          <path class="shield-arc" d="M24 50 Q40 30 56 50" />
          <line class="shield-lance" x1="40" y1="50" x2="40" y2="68" />
        </g>
        <circle class="shield-orbit" cx="40" cy="40" r="30" />
        <circle class="shield-orbit orbit-delayed" cx="40" cy="40" r="34" />
        <circle class="shield-core" cx="40" cy="38" r="3" />
      </svg>
    </div>
    
    <h2>KRAUSE INSURANCE</h2>
    <div class="progress-percentage" id="percentage">0%</div>
    <p class="loading-text">Preparando su experiencia<span class="dots"></span></p>
    <p class="status-text" id="status">Inicializando sistema</p>
    
    <!-- Sab칤as que... Section -->
    <div class="did-you-know">
      <div class="did-you-know-title">游눠 Sab칤as que...</div>
      <div class="did-you-know-text" id="funFact">Cargando dato interesante...</div>
    </div>
    
    <div class="progress-details">
      <span id="detail-left">Conectando</span>
      <span id="detail-right">...</span>
    </div>
  </div>
  
  <script>
    // Create floating particles
    const particlesContainer = document.getElementById('particles');
    for (let i = 0; i < 30; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.animationDuration = (Math.random() * 3 + 4) + 's';
      particle.style.animationDelay = Math.random() * 5 + 's';
      particlesContainer.appendChild(particle);
    }
    
    // Fun facts about insurance and Krause Insurance
    const funFacts = [
      "Krause Insurance fue fundada con el compromiso de brindar protecci칩n personalizada a cada familia y negocio.",
      "El primer seguro documentado data del a침o 1347 en G칠nova, Italia, para proteger embarcaciones.",
      "El seguro de vida ayuda a proteger el futuro financiero de tus seres queridos en caso de imprevistos.",
      "Krause Insurance trabaja con las aseguradoras m치s confiables para garantizar tu tranquilidad.",
      "El 60% de las peque침as empresas cierran despu칠s de un desastre mayor sin tener un seguro adecuado.",
      "Los seguros de hogar cubren no solo da침os estructurales, sino tambi칠n tus pertenencias personales.",
      "Actualizar tu p칩liza regularmente asegura que tu cobertura se ajuste a tus necesidades actuales.",
      "El seguro de salud puede cubrir ex치menes preventivos sin costo adicional para ti.",
      "Krause Insurance ofrece consultas personalizadas para encontrar la cobertura perfecta para ti.",
      "El seguro de autom칩vil es obligatorio en la mayor칤a de los estados para proteger a todos en la carretera.",
      "Las p칩lizas paraguas ofrecen protecci칩n adicional m치s all치 de tus seguros b치sicos.",
      "Krause Insurance cuenta con m치s de 25 a침os de experiencia protegiendo familias y negocios.",
      "El deducible es la cantidad que pagas antes de que tu seguro comience a cubrir un reclamo.",
      "Comparar cotizaciones puede ahorrarte hasta un 30% en tu prima anual de seguro.",
      "El seguro de responsabilidad civil protege tu patrimonio en caso de demandas legales.",
      "Krause Insurance ofrece atenci칩n 24/7 para asistirte cuando m치s lo necesites.",
      "El seguro de inquilino protege tus pertenencias incluso si no eres due침o de la propiedad.",
      "Mantener un buen historial de cr칠dito puede reducir el costo de tus primas de seguro.",
      "El seguro de vida temporal es una opci칩n econ칩mica para protecci칩n durante per칤odos espec칤ficos.",
      "Krause Insurance te ayuda a entender cada aspecto de tu p칩liza para que tomes decisiones informadas."
    ];
    
    // Select random fun fact
    const randomFact = funFacts[Math.floor(Math.random() * funFacts.length)];
    document.getElementById('funFact').textContent = randomFact;
    
    // Loading simulation
    const statusMessages = [
      { text: 'Inicializando sistema', detail: 'Conectando' },
      { text: 'Verificando credenciales', detail: 'Autenticando' },
      { text: 'Cargando datos de usuario', detail: 'Sincronizando' },
      { text: 'Configurando preferencias', detail: 'Personalizando' },
      { text: 'Preparando interfaz', detail: 'Optimizando' },
      { text: 'Cargando recursos', detail: 'Finalizando' },
      { text: 'Pre-cache completado', detail: 'Listo' }
    ];
    
    let progress = 0;
    const totalTime = 5000; // 5 seconds
    const intervalTime = totalTime / 100;
    
    const progressInterval = setInterval(() => {
      progress += 1;
      
      // Update percentage
      document.getElementById('percentage').textContent = progress + '%';
      
      // Update status message
      const statusIndex = Math.floor((progress / 100) * statusMessages.length);
      if (statusIndex < statusMessages.length) {
        document.getElementById('status').textContent = statusMessages[statusIndex].text;
        document.getElementById('detail-left').textContent = statusMessages[statusIndex].detail;
      }
      
      // Complete
      if (progress >= 100) {
        clearInterval(progressInterval);
        setTimeout(() => {
          // Get redirect target from URL parameter or default to app.html
          const urlParams = new URLSearchParams(window.location.search);
          const redirectTo = urlParams.get('redirect') || 'app.html';
          window.location.href = redirectTo;
        }, 500);
      }
    }, intervalTime);
  </script>
</body>
</html>
